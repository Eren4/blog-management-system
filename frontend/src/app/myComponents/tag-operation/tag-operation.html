<table>
    <tr>
        <th>Id</th>
        <th>İsim</th>
    </tr>

    @for(tag of tags(); track tag.id) {
        <tr>
            <td>{{ tag.id }}</td>
            <td> {{ tag.tagName }} </td>
            <td>
                <button (click)="startUpdate(tag)">Güncelle</button>
                <button (click)="onDelete(tag.id)">Sil</button>
            </td>
        </tr>
    }
</table>

<hr>

<form [formGroup]="createForm" (ngSubmit)="onCreate()">
    <h3>Etiket Ekle</h3>

    <label>
        İsim
        <input type="text" formControlName="tagName" />
    </label>

    @if(getErrorMessageByName(createForm, 'tagName'); as msg) {
        <div class="error">
            {{ msg }}
        </div>
    }

    <button type="submit" [disabled]="createForm.invalid">Ekle</button>
</form>

<hr>

@if(selectedTag() !== null) {
    <form [formGroup]="updateForm" (ngSubmit)="onUpdate()">
        <h3>Etiket güncelle</h3>

        <input type="hidden" formControlName="id" />

        <label>
            İsim
            <input type="text" formControlName="tagName" />
        </label>

        @if(getErrorMessageByName(createForm, 'tagName'); as msg) {
            <div class="error">
                {{ msg }}
            </div>
        }
        
        <button type="submit" [disabled]="updateForm.invalid">Güncelle</button>

        <button type="button" (click)="cancelUpdate()">İptal</button>
    </form>
}